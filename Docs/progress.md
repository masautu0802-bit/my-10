# 進捗管理表 — マイ10

最終更新日: 2026-02-12

---

## 1. 基盤セットアップ

| ID | 項目 | ステータス | 備考 |
|----|------|-----------|------|
| S1 | Next.js プロジェクト作成 | ✅ 完了 | Next.js 16.1.6 / React 19 |
| S2 | Tailwind CSS 導入 | ✅ 完了 | Tailwind CSS 4 |
| S3 | TypeScript 設定 | ✅ 完了 | |
| S4 | Supabase Auth 導入・設定 | ✅ 完了 | クライアント設定、Server Actions、ミドルウェア、ユーザー同期トリガー完了 |
| S5 | Supabase プロジェクト作成・接続設定 | ✅ 完了 | 環境変数設定（NEXT_PUBLIC_SUPABASE_URL, NEXT_PUBLIC_SUPABASE_ANON_KEY）、MCP接続完了 |
| S6 | Supabase DBスキーマ作成・RLS設定 | ✅ 完了 | 全7テーブル作成、RLSポリシー適用、マイグレーション11件完了 |
| S7 | Vercel デプロイ設定 | 🔴 未着手 | |

---

## 2. ページ別実装進捗

各ページは **UI設計（Stitch） → 外部設計書へ反映 → 実装** の順で進行。

### P1. トップページ (`app/page.tsx`)

| 工程 | ステータス | 備考 |
|------|-----------|------|
| UI設計（Stitch） | ✅ 完了 | |
| 外部設計書反映 | ✅ 完了 | |
| フロントエンド実装 | ✅ 完了 | ヘッダー、カテゴリ、ショップカードグリッド、BottomNav |
| データ取得実装 | 🔴 未着手 | Server Components でDB直接取得、フォロワー数順 |

**表示仕様**: ショップカード（ショップ名 / オーナー名 / テーマ / 1押し商品画像+商品名）、1画面4件表示

---

### P2. ショップ詳細ページ (`app/shops/[shopId]/page.tsx`)

| 工程 | ステータス | 備考 |
|------|-----------|------|
| UI設計（Stitch） | ✅ 完了 | |
| 外部設計書反映 | ✅ 完了 | |
| フロントエンド実装 | ✅ 完了 | プロフィール、フォロー、タグ、Masonryグリッド |
| データ取得実装 | 🔴 未着手 | |

**表示仕様**: ショップ名 / オーナー名 / ショップ説明文 / 商品一覧（オーナー設定順）

---

### P3. 商品詳細ページ (`app/items/[itemId]/page.tsx`)

| 工程 | ステータス | 備考 |
|------|-----------|------|
| UI設計（Stitch） | ✅ 完了 | |
| 外部設計書反映 | ✅ 完了 | |
| フロントエンド実装 | ✅ 完了 | 商品画像、価格、タグ、オーナーコメント、ECリンクボタン |
| データ取得実装 | 🔴 未着手 | |

**表示仕様**: 商品名 / 商品画像 / オーナーコメント / 価格帯 / 外部ECリンク

---

### P4. ログイン／新規登録ページ (`app/auth/`)

| 工程 | ステータス | 備考 |
|------|-----------|------|
| UI設計（Stitch） | ✅ 完了 | |
| 外部設計書反映 | ✅ 完了 | |
| フロントエンド実装 | ✅ 完了 | ログイン・新規登録、Google認証ボタン |
| Supabase Auth連携 | 🔴 未着手 | S4完了済み、Server Actions接続が必要 |

---

### P5. マイページ (`app/my/page.tsx`)

| 工程 | ステータス | 備考 |
|------|-----------|------|
| UI設計（Stitch） | ✅ 完了 | |
| 外部設計書反映 | ✅ 完了 | |
| フロントエンド実装 | ✅ 完了 | タブ切替（フォロー中/保存済み）、ショップカード |
| データ取得実装 | 🔴 未着手 | 要ログイン |

**表示仕様**: フォロー中ショップ一覧 / 保存商品一覧 / 新着バッジ（shop_update_events）

---

### P6. プロフィール編集ページ (`app/my/profile/`)

| 工程 | ステータス | 備考 |
|------|-----------|------|
| UI設計（Stitch） | ✅ 完了 | |
| 外部設計書反映 | ✅ 完了 | |
| フロントエンド実装 | ✅ 完了 | アバター、ユーザー名、自己紹介、興味タグ |
| Server Actions 実装 | 🔴 未着手 | 要ログイン |

---

### P7. 出店者管理ページ／簡易CMS (`app/cms/shops/[shopId]/`)

| 工程 | ステータス | 備考 |
|------|-----------|------|
| UI設計（Stitch） | ✅ 完了 | |
| 外部設計書反映 | ✅ 完了 | |
| フロントエンド実装 | ✅ 完了 | ステータス、統計、商品リスト、ドラッグ並替えUI |
| Server Actions 実装 | 🔴 未着手 | 要ログイン |

---

## 3. 機能別実装進捗（横断機能）

| ID | 機能 | 優先度 | ステータス | 関連ページ | 備考 |
|----|------|--------|-----------|-----------|------|
| F1 | ユーザー登録/ログイン | MUST | 🔴 未着手 | P4 | Supabase Auth（メール+パスワード） |
| F2 | プロフィール編集 | SHOULD | 🔴 未着手 | P6 | 興味・好み設定 |
| F3 | セレクトショップ一覧 | MUST | 🔴 未着手 | P1 | トップページ表示 |
| F4 | 商品詳細表示 | SHOULD | 🔴 未着手 | P3 | 商品詳細・説明 |
| F5 | ECリンク | MUST | 🔴 未着手 | P3 | 外部購入リンク |
| F6 | フォロー/お気に入り | SHOULD | 🔴 未着手 | P2, P3, P5 | ショップフォロー + 商品保存 |
| F7 | レコメンド | COULD | 🟡 実装中 | P1 | コアロジック実装完了、DB設定（インデックス・キャッシュテーブル）は手動適用が必要 |
| F8 | コメント/レビュー | COULD | 🔴 未着手 | - | MVP後 |

---

## 4. ステータス凡例

| アイコン | 意味 |
|---------|------|
| ✅ 完了 | 実装完了・動作確認済み |
| 🟡 実装中 | 現在実装中 |
| 🔴 未着手 | 未着手 |
| ⏸️ 保留 | 一時保留 |

---

## 5. 実装履歴

| 日付 | 内容 |
|------|------|
| 2026-02-08 | プロジェクト初期セットアップ完了（Next.js 16.1.6 / Tailwind CSS 4 / TypeScript） |
| 2026-02-08 | 技術スタック変更：認証・DB共にSupabaseに統一（@supabase/supabase-js, @supabase/auth-helpers-nextjs インストール済み） |
| 2026-02-08 | Supabaseプロジェクト作成・MCP接続完了 |
| 2026-02-08 | データベーススキーマ作成完了：全7テーブル + RLSポリシー設定（10マイグレーション適用） |
| 2026-02-08 | セキュリティ・パフォーマンス最適化完了（関数search_path設定、RLSポリシー最適化） |
| 2026-02-08 | Supabase Auth実装完了（クライアント設定、Server Actions、ミドルウェア、自動ユーザー同期） |
| 2026-02-08 | 全ページUI実装完了（トップ、ショップ詳細、商品詳細、ログイン、新規登録、マイページ、プロフィール編集、出店者管理） |
| 2026-02-12 | レコメンドシステム コアロジック実装完了（候補生成・ランキング・多様性制御・キャッシュ・Server Actions・UIコンポーネント） |
| 2026-02-12 | トップページにレコメンドセクション統合（For You セクション） |
| 2026-02-12 | お気に入り・フォローアクションにレコメンドキャッシュ無効化を組み込み |
| 2026-02-12 | レコメンド用SQLマイグレーションファイル作成（インデックス・キャッシュテーブル・閲覧履歴テーブル） |

---

## 6. 次のアクション

- [ ] **Supabase SQL Editorで以下のSQLを実行**（手動作業）:
  - `app/lib/recommendation/sql/001_create_indexes.sql`（インデックス追加）
  - `app/lib/recommendation/sql/002_create_recommendation_cache.sql`（キャッシュテーブル作成）
  - `app/lib/recommendation/sql/003_create_item_views.sql`（閲覧履歴テーブル、将来用）
- [ ] 認証フォームとSupabase Auth Server Actionsを接続
- [ ] 各ページのデータ取得実装（Supabase DB連携）
- [ ] フォロー/お気に入り機能の実装
- [ ] Vercelデプロイ設定
