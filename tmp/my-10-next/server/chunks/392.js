exports.id=392,exports.ids=[392],exports.modules={10730:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81921,23))},18041:(a,b,c)=>{"use strict";c.d(b,{U:()=>f});var d=c(71380),e=c(36042);async function f(){let a=await (0,e.UL)();return(0,d.createServerClient)("https://xrlnbwrmascukxmwnqge.supabase.co","sb_publishable_aLlzFBj3cKzMd1WUl8ccKg_lw5naU8P",{cookies:{getAll:()=>a.getAll(),setAll(b){try{b.forEach(({name:b,value:c,options:d})=>a.set(b,c,d))}catch{}}}})}},19099:(a,b,c)=>{"use strict";var d=c(54839);c.o(d,"usePathname")&&c.d(b,{usePathname:function(){return d.usePathname}}),c.o(d,"useRouter")&&c.d(b,{useRouter:function(){return d.useRouter}})},19420:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,95547,23)),Promise.resolve().then(c.t.bind(c,15098,23)),Promise.resolve().then(c.t.bind(c,47644,23)),Promise.resolve().then(c.t.bind(c,33859,23)),Promise.resolve().then(c.t.bind(c,98099,23)),Promise.resolve().then(c.t.bind(c,16237,23)),Promise.resolve().then(c.t.bind(c,98562,23)),Promise.resolve().then(c.t.bind(c,36675,23))},32053:(a,b,c)=>{"use strict";c.r(b),c.d(b,{"409df28d6b10ce57dab11c3e96fbdbcb2597ec2f13":()=>d.LD,"40b939e718d85017da81384118de7740aeba93d643":()=>d.U3,"40ef8e59950d76b2f4f931514d21ece7c9ea72a49b":()=>d.wE,"6076be8268c11d3058402119a27dd6a9aed25c9ee4":()=>d.fk,"60c924ceb4a4505954e81c34c608fc38585f9d3f08":()=>d.u});var d=c(61250)},32056:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>l,metadata:()=>k});var d=c(5735),e=c(83197),f=c.n(e),g=c(86494),h=c.n(g),i=c(44470),j=c.n(i);c(82704);let k={title:"マイ10 - My10",description:"なんか欲しいけど何が欲しいかわからないモヤモヤを解消する、キュレーション型Webサービス"};function l({children:a}){return(0,d.jsxs)("html",{lang:"ja",children:[(0,d.jsx)("head",{children:(0,d.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap",rel:"stylesheet"})}),(0,d.jsx)("body",{className:`${f().variable} ${h().variable} ${j().variable} antialiased`,children:a})]})}},39513:(a,b,c)=>{"use strict";c.d(b,{U:()=>e});var d=c(99829);let e=(0,d.createServerReference)("40b939e718d85017da81384118de7740aeba93d643",d.callServer,void 0,d.findSourceMapURL,"uploadItemImage")},46055:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(88868);let e=async a=>[{type:"image/x-icon",sizes:"16x16",url:(0,d.fillMetadataSegment)(".",await a.params,"favicon.ico")+"?603d046c9a6fdfbb"}]},48368:(a,b,c)=>{"use strict";c.d(b,{default:()=>f});var d=c(48249),e=c(19099);function f({className:a="",iconSize:b=20,icon:c="arrow_back_ios_new",style:f,iconStyle:g}){let h=(0,e.useRouter)();return(0,d.jsx)("button",{onClick:()=>h.back(),className:a||"flex size-10 items-center justify-center rounded-full bg-white shadow-sm hover:scale-105 transition-transform text-text-main border border-sage/50",style:f,"aria-label":"戻る",children:(0,d.jsx)("span",{className:"material-symbols-outlined",style:{fontSize:b,...g},children:c})})}},61212:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81921,23)),Promise.resolve().then(c.t.bind(c,60440,23)),Promise.resolve().then(c.t.bind(c,84342,23)),Promise.resolve().then(c.t.bind(c,82265,23)),Promise.resolve().then(c.t.bind(c,35421,23)),Promise.resolve().then(c.t.bind(c,61335,23)),Promise.resolve().then(c.t.bind(c,70664,23)),Promise.resolve().then(c.bind(c,74661))},61250:(a,b,c)=>{"use strict";c.d(b,{LD:()=>m,U3:()=>j,fk:()=>l,u:()=>n,wE:()=>k});var d=c(95349),e=c(42650),f=c(18041),g=c(78588),h=c(89337);let i=["image/jpeg","image/png","image/webp","image/svg+xml"];async function j(a){let b=await (0,g.oC)(),c=await (0,f.U)(),d=a.get("file");if(!d)return{error:"ファイルが選択されていません"};if(!i.includes(d.type))return{error:"対応していないファイル形式です（JPEG, PNG, WebP, SVG のみ）"};if(d.size>5242880)return{error:"ファイルサイズが5MBを超えています"};let e=d.name.split(".").pop(),h=`${b.id}-${Date.now()}.${e}`,{error:j}=await c.storage.from("item-images").upload(h,d,{cacheControl:"3600",upsert:!0});if(j)return{error:j.message};let{data:{publicUrl:k}}=c.storage.from("item-images").getPublicUrl(h);return{url:k}}async function k(a){let b=await (0,g.oC)(),c=await (0,f.U)(),{data:d}=await c.from("shops").select("owner_id").eq("id",a.shopId).single();if(!d||d.owner_id!==b.id)return{error:"権限がありません"};let{count:h}=await c.from("items").select("*",{count:"exact",head:!0}).eq("shop_id",a.shopId);if(h&&h>=10)return{error:"アイテムは最大10個までです"};let{data:i}=await c.from("items").select("order_index").eq("shop_id",a.shopId).order("order_index",{ascending:!1}).limit(1).single(),j=i?i.order_index+1:0,{data:k,error:l}=await c.from("items").insert({shop_id:a.shopId,name:a.name,ec_url:a.ecUrl||null,image_url:a.imageUrl||null,price_range:a.priceRange||null,comment:a.comment||null,order_index:j}).select("id").single();return l?(console.error("アイテム作成エラー:",l),{error:"アイテムの作成に失敗しました"}):((0,e.revalidatePath)(`/cms/shops/${a.shopId}`),(0,e.revalidatePath)(`/shops/${a.shopId}`),(0,e.revalidatePath)("/"),{itemId:k.id})}async function l(a,b){let c=await (0,g.oC)(),d=await (0,f.U)(),{data:h}=await d.from("items").select("shop_id, shops!inner(owner_id)").eq("id",a).single();if(!h)return{error:"アイテムが見つかりません"};if(h.shops.owner_id!==c.id)return{error:"権限がありません"};let{error:i}=await d.from("items").update({name:b.name,ec_url:b.ecUrl||null,image_url:b.imageUrl||null,price_range:b.priceRange||null,comment:b.comment||null,updated_at:new Date().toISOString()}).eq("id",a);return i?(console.error("アイテム更新エラー:",i),{error:"アイテムの更新に失敗しました"}):((0,e.revalidatePath)(`/cms/shops/${h.shop_id}`),(0,e.revalidatePath)(`/shops/${h.shop_id}`),(0,e.revalidatePath)("/"),{success:!0})}async function m(a){let b=await (0,g.oC)(),c=await (0,f.U)(),{data:d}=await c.from("items").select("shop_id, shops!inner(owner_id)").eq("id",a).single();if(!d)return{error:"アイテムが見つかりません"};if(d.shops.owner_id!==b.id)return{error:"権限がありません"};let{error:h}=await c.from("items").delete().eq("id",a);return h?{error:"アイテムの削除に失敗しました"}:((0,e.revalidatePath)(`/cms/shops/${d.shop_id}`),(0,e.revalidatePath)(`/shops/${d.shop_id}`),(0,e.revalidatePath)("/"),{})}async function n(a,b){let c=await (0,g.oC)(),d=await (0,f.U)(),{data:h}=await d.from("shops").select("owner_id").eq("id",a).single();if(!h||h.owner_id!==c.id)return{error:"権限がありません"};let i=b.map((a,b)=>({id:a,order_index:b}));return await Promise.all(i.map(b=>d.from("items").update({order_index:b.order_index}).eq("id",b.id).eq("shop_id",a))),(0,e.revalidatePath)(`/cms/shops/${a}`),(0,e.revalidatePath)(`/shops/${a}`),(0,e.revalidatePath)("/"),{}}(0,h.D)([j,k,l,m,n]),(0,d.A)(j,"40b939e718d85017da81384118de7740aeba93d643",null),(0,d.A)(k,"40ef8e59950d76b2f4f931514d21ece7c9ea72a49b",null),(0,d.A)(l,"6076be8268c11d3058402119a27dd6a9aed25c9ee4",null),(0,d.A)(m,"409df28d6b10ce57dab11c3e96fbdbcb2597ec2f13",null),(0,d.A)(n,"60c924ceb4a4505954e81c34c608fc38585f9d3f08",null)},78335:()=>{},78588:(a,b,c)=>{"use strict";c.d(b,{oC:()=>g});var d=c(18041),e=c(44863);let f=(0,e.cache)(async()=>{let a=await (0,d.U)(),{data:{user:b}}=await a.auth.getUser();return b});async function g(){let a=await f();if(!a)throw Error("認証が必要です");return a}(0,e.cache)(async()=>{let a=await f();if(!a)return null;let b=await (0,d.U)(),{data:c}=await b.from("users").select("*").eq("id",a.id).single();return c})},80968:()=>{},82704:()=>{},84276:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(5735);function e(){return(0,d.jsx)("div",{className:"relative flex min-h-screen w-full flex-col overflow-x-hidden max-w-md mx-auto bg-[#E5E7EB] shadow-2xl",children:(0,d.jsxs)("div",{className:"relative flex min-h-screen w-full flex-col overflow-x-hidden bg-bgwarm",children:[(0,d.jsxs)("header",{className:"sticky top-0 z-50 bg-white/95 backdrop-blur-lg px-6 py-5 border-b border-sage/10 flex items-center justify-between shadow-sm",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] uppercase tracking-[0.2em] font-black mb-1 text-sage/60",children:[(0,d.jsx)("span",{className:"material-symbols-outlined text-[10px]",children:"location_on"}),(0,d.jsx)("span",{children:"Your Shopping Street"})]}),(0,d.jsxs)("h1",{className:"text-2xl font-serif font-bold tracking-tight flex items-center gap-3 text-[#2a2a2a]",children:["My10",(0,d.jsx)("span",{className:"h-1 w-8 rounded-full bg-coral/30 mt-1"})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:"p-3 rounded-2xl bg-gray-50 border border-gray-100",children:(0,d.jsx)("span",{className:"material-symbols-outlined text-[20px] text-[#2a2a2a]",children:"search"})}),(0,d.jsx)("div",{className:"p-3 rounded-2xl bg-gray-50 border border-gray-100",children:(0,d.jsx)("span",{className:"material-symbols-outlined text-[20px] text-[#2a2a2a]",children:"notifications"})})]})]}),(0,d.jsxs)("main",{className:"flex-1 pb-28",children:[(0,d.jsx)("div",{className:"px-4 py-6",children:(0,d.jsx)("div",{className:"flex gap-3 overflow-hidden",children:Array.from({length:4}).map((a,b)=>(0,d.jsx)("div",{className:"flex-shrink-0 w-20 h-24 rounded-2xl bg-sage/10 animate-pulse"},b))})}),(0,d.jsx)("div",{className:"px-4 space-y-4",children:Array.from({length:3}).map((a,b)=>(0,d.jsxs)("div",{className:"bg-white rounded-3xl p-4 shadow-sm",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,d.jsx)("div",{className:"size-10 rounded-full bg-sage/15 animate-pulse"}),(0,d.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,d.jsx)("div",{className:"h-4 w-28 rounded-full bg-sage/15 animate-pulse"}),(0,d.jsx)("div",{className:"h-3 w-20 rounded-full bg-sage/10 animate-pulse"})]})]}),(0,d.jsx)("div",{className:"grid grid-cols-3 gap-2",children:Array.from({length:3}).map((a,b)=>(0,d.jsx)("div",{className:"aspect-square rounded-2xl bg-sage/10 animate-pulse"},b))})]},b))})]})]})})}},92578:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,95547,23))},94120:()=>{},96487:()=>{}};