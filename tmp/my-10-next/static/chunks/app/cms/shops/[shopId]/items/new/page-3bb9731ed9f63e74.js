(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[450],{3321:(e,t,a)=>{"use strict";var s=a(4645);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},3356:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(5155),r=a(2115),l=a(3321),n=a(8884),i=a(9339);let o=(0,i.createServerReference)("40ef8e59950d76b2f4f931514d21ece7c9ea72a49b",i.callServer,void 0,i.findSourceMapURL,"createItem");var c=a(3428);function d({params:e}){let[t,a]=(0,r.useState)(""),[i,d]=(0,r.useState)(""),[x,m]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[p,f]=(0,r.useState)(""),[b,g]=(0,r.useState)(""),[v,j]=(0,r.useState)(""),[w,N]=(0,r.useState)(!1),[y,S]=(0,r.useState)(""),[k,R]=(0,r.useTransition)(),_=(0,r.useRef)(null),C=(0,l.useRouter)();(0,r.useState)(()=>{e.then(e=>a(e.shopId))});let U=async e=>{let t=e.target.files?.[0];if(!t)return;let a=new FileReader;a.onload=e=>{j(e.target?.result)},a.readAsDataURL(t),N(!0),S("");try{let e=new FormData;e.append("file",t);let a=await (0,n.U)(e);a.error?(S(a.error),j(""),g("")):a.url&&g(a.url)}catch{S("画像のアップロードに失敗しました"),j(""),g("")}finally{N(!1)}};return t?(0,s.jsxs)("div",{className:"bg-bgwarm min-h-screen flex flex-col antialiased max-w-md mx-auto shadow-2xl",children:[(0,s.jsxs)("header",{className:"flex items-center justify-between px-6 py-5 bg-bgwarm sticky top-0 z-20",children:[(0,s.jsx)(c.default,{}),(0,s.jsx)("h1",{className:"text-xl font-extrabold leading-tight tracking-tight text-text-main",children:"アイテム登録"}),(0,s.jsx)("button",{onClick:()=>C.back(),className:"text-text-muted font-bold text-sm px-2 hover:text-text-main transition-colors",children:"キャンセル"})]}),(0,s.jsxs)("main",{className:"flex-1 flex flex-col gap-6 px-6 pb-32 overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"text-[11px] font-bold text-text-muted ml-2 uppercase tracking-wider",children:"商品画像"}),v?(0,s.jsxs)("div",{className:"relative bg-white border-2 border-sage/30 rounded-2xl p-4 shadow-sm",children:[(0,s.jsx)("div",{className:"aspect-square w-full max-w-xs mx-auto rounded-xl overflow-hidden bg-gray-100",children:(0,s.jsx)("img",{src:v,alt:"商品画像プレビュー",className:"w-full h-full object-cover"})}),w&&(0,s.jsx)("div",{className:"absolute inset-0 bg-white/70 rounded-2xl flex items-center justify-center",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-text-main",children:[(0,s.jsx)("span",{className:"material-symbols-outlined animate-spin text-[20px]",children:"progress_activity"}),(0,s.jsx)("span",{className:"font-semibold text-sm",children:"アップロード中..."})]})}),!w&&(0,s.jsx)("button",{type:"button",onClick:()=>{g(""),j(""),_.current&&(_.current.value="")},className:"absolute top-2 right-2 flex size-8 items-center justify-center rounded-full bg-white shadow-md text-text-muted hover:text-coral transition-colors",children:(0,s.jsx)("span",{className:"material-symbols-outlined text-[18px]",children:"close"})})]}):(0,s.jsxs)("button",{type:"button",onClick:()=>_.current?.click(),className:"w-full bg-white border-2 border-dashed border-sage rounded-2xl px-5 py-10 flex flex-col items-center gap-3 hover:border-text-main/50 transition-all text-text-muted",children:[(0,s.jsx)("span",{className:"material-symbols-outlined text-[36px]",children:"add_photo_alternate"}),(0,s.jsx)("span",{className:"text-sm font-semibold",children:"タップして画像を選択"})]}),(0,s.jsx)("input",{ref:_,type:"file",accept:"image/*",onChange:U,className:"hidden"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("label",{className:"text-[11px] font-bold text-text-muted ml-2 uppercase tracking-wider",children:["商品名 ",(0,s.jsx)("span",{className:"text-coral",children:"*"})]}),(0,s.jsx)("input",{className:"w-full bg-white border-2 border-sage rounded-2xl px-5 py-4 text-base font-semibold focus:outline-none focus:border-text-main focus:ring-0 transition-all placeholder:text-slate-300 text-text-main shadow-sm hover:border-text-main/50",type:"text",value:i,onChange:e=>d(e.target.value),placeholder:"商品名を入力してください"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"text-[11px] font-bold text-text-muted ml-2 uppercase tracking-wider",children:"価格"}),(0,s.jsx)("input",{className:"w-full bg-white border-2 border-sage rounded-2xl px-5 py-4 text-base font-semibold focus:outline-none focus:border-text-main focus:ring-0 transition-all placeholder:text-slate-300 text-text-main shadow-sm hover:border-text-main/50",type:"text",value:x,onChange:e=>m(e.target.value),placeholder:"例: \xa53,000"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"text-[11px] font-bold text-text-muted ml-2 uppercase tracking-wider",children:"購入リンク"}),(0,s.jsx)("input",{className:"w-full bg-white border-2 border-sage rounded-2xl px-5 py-4 text-base font-semibold focus:outline-none focus:border-text-main focus:ring-0 transition-all placeholder:text-slate-300 text-text-main shadow-sm hover:border-text-main/50",type:"url",value:u,onChange:e=>h(e.target.value),placeholder:"https://www.amazon.co.jp/..."}),(0,s.jsx)("p",{className:"text-xs text-text-muted ml-2",children:"Amazon等の購入ページURL（任意）"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"text-[11px] font-bold text-text-muted ml-2 uppercase tracking-wider",children:"コメント"}),(0,s.jsx)("textarea",{className:"w-full bg-white border-2 border-sage rounded-2xl px-5 py-4 text-base font-semibold focus:outline-none focus:border-text-main focus:ring-0 transition-all placeholder:text-slate-300 text-text-main shadow-sm hover:border-text-main/50 resize-none",rows:3,value:p,onChange:e=>f(e.target.value),placeholder:"この商品についてのコメント（任意）"})]}),y&&(0,s.jsx)("div",{className:"bg-coral/10 border border-coral/30 rounded-2xl p-4",children:(0,s.jsx)("p",{className:"text-coral text-sm font-medium text-center",children:y})}),(0,s.jsx)("div",{className:"mt-2 pb-4",children:(0,s.jsx)("button",{onClick:()=>{i.trim()?(S(""),R(async()=>{let e=await o({shopId:t,name:i.trim(),ecUrl:u.trim()||void 0,imageUrl:b||void 0,priceRange:x.trim()||void 0,comment:p.trim()||void 0});e.error?S(e.error):e.itemId&&C.push(`/cms/shops/${t}`)})):S("商品名を入力してください")},disabled:k||w||!i.trim(),className:"w-full bg-text-main hover:bg-text-main/90 text-white font-extrabold text-lg py-4 rounded-2xl shadow-lg shadow-text-main/20 transition-all active:scale-[0.98] active:shadow-none flex items-center justify-center gap-2 disabled:opacity-60",children:k?(0,s.jsx)("span",{className:"material-symbols-outlined animate-spin text-[20px]",children:"progress_activity"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"material-symbols-outlined text-[20px]",children:"add_shopping_cart"}),(0,s.jsx)("span",{children:"アイテムを登録"})]})})})]})]}):(0,s.jsx)("div",{className:"bg-bgwarm min-h-screen flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-text-main",children:"読み込み中..."})})}},3428:(e,t,a)=>{"use strict";a.d(t,{default:()=>l});var s=a(5155),r=a(3321);function l({className:e="",iconSize:t=20,icon:a="arrow_back_ios_new",style:l,iconStyle:n}){let i=(0,r.useRouter)();return(0,s.jsx)("button",{onClick:()=>i.back(),className:e||"flex size-10 items-center justify-center rounded-full bg-white shadow-sm hover:scale-105 transition-transform text-text-main border border-sage/50",style:l,"aria-label":"戻る",children:(0,s.jsx)("span",{className:"material-symbols-outlined",style:{fontSize:t,...n},children:a})})}},7552:(e,t,a)=>{Promise.resolve().then(a.bind(a,3356))},8884:(e,t,a)=>{"use strict";a.d(t,{U:()=>r});var s=a(9339);let r=(0,s.createServerReference)("40b939e718d85017da81384118de7740aeba93d643",s.callServer,void 0,s.findSourceMapURL,"uploadItemImage")},9339:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={callServer:function(){return l.callServer},createServerReference:function(){return i.createServerReference},findSourceMapURL:function(){return n.findSourceMapURL}};for(var r in s)Object.defineProperty(t,r,{enumerable:!0,get:s[r]});let l=a(7304),n=a(4060),i=a(7197)}},e=>{e.O(0,[441,794,358],()=>e(e.s=7552)),_N_E=e.O()}]);