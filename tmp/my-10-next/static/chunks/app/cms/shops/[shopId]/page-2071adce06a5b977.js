(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8],{1995:(e,s,t)=>{"use strict";t.d(s,{default:()=>o});var r=t(5155),a=t(8500),l=t.n(a),n=t(3321);let i=[{href:"/",icon:"home",iconFilled:"home",label:"ホーム"},{href:"/search",icon:"search",label:"さがす"},{href:"/shop",icon:"storefront",label:"ショップ"},{href:"/my/keep",icon:"bookmark",iconFilled:"bookmark",label:"キープ"},{href:"/my",icon:"person",iconFilled:"person",label:"マイページ"}];function o(){let e=(0,n.usePathname)();return(0,r.jsxs)("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-bgwarm border-t border-sage/10 pt-2 px-2 max-w-md mx-auto rounded-t-[2rem] shadow-[0_-5px_20px_rgba(162,178,159,0.08)]",children:[(0,r.jsx)("div",{className:"flex justify-around items-center h-16",children:i.map(s=>{let t="/my"===s.href?"/my"===e||e.startsWith("/my")&&!e.startsWith("/my/keep"):e===s.href||"/"!==s.href&&e.startsWith(s.href);return(0,r.jsxs)(l(),{href:s.href,className:`flex flex-col items-center justify-center gap-1 w-16 transition-colors group ${t?"text-sage":"text-gray-400 hover:text-sage"}`,children:[t&&(0,r.jsx)("span",{className:"absolute -top-0 w-8 h-1 bg-sage rounded-full"}),(0,r.jsx)("span",{className:"material-symbols-outlined text-[24px]",style:t?{fontVariationSettings:"'FILL' 1"}:void 0,children:s.icon}),(0,r.jsx)("span",{className:"text-[10px] font-medium",children:s.label})]},s.label)})}),(0,r.jsx)("div",{className:"h-[env(safe-area-inset-bottom)]"})]})}},3321:(e,s,t)=>{"use strict";var r=t(4645);t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})},3428:(e,s,t)=>{"use strict";t.d(s,{default:()=>l});var r=t(5155),a=t(3321);function l({className:e="",iconSize:s=20,icon:t="arrow_back_ios_new",style:l,iconStyle:n}){let i=(0,a.useRouter)();return(0,r.jsx)("button",{onClick:()=>i.back(),className:e||"flex size-10 items-center justify-center rounded-full bg-white shadow-sm hover:scale-105 transition-transform text-text-main border border-sage/50",style:l,"aria-label":"戻る",children:(0,r.jsx)("span",{className:"material-symbols-outlined",style:{fontSize:s,...n},children:t})})}},3779:(e,s,t)=>{"use strict";t.d(s,{default:()=>d});var r=t(5155),a=t(2115),l=t(8500),n=t.n(l),i=t(9339);let o=(0,i.createServerReference)("60c924ceb4a4505954e81c34c608fc38585f9d3f08",i.callServer,void 0,i.findSourceMapURL,"reorderItems"),c=(0,i.createServerReference)("409df28d6b10ce57dab11c3e96fbdbcb2597ec2f13",i.callServer,void 0,i.findSourceMapURL,"deleteItem");function d({initialItems:e,shopId:s}){let[t,l]=(0,a.useState)(e),[i,d]=(0,a.useState)(null),[m,x]=(0,a.useState)(!1),[u,h]=(0,a.useState)(null),[b,f]=(0,a.useState)(!1),p=async()=>{if(null===i)return;x(!0);let e=t.map(e=>e.id);await o(s,e),d(null),x(!1)},g=async()=>{u&&(f(!0),(await c(u)).error||l(e=>e.filter(e=>e.id!==u)),h(null),f(!1))};return(0,r.jsxs)("section",{className:"flex flex-col gap-3",children:[t.map((e,a)=>(0,r.jsxs)("div",{draggable:!0,onDragStart:()=>{d(a)},onDragOver:e=>((e,s)=>{if(e.preventDefault(),null===i||i===s)return;let r=[...t],a=r[i];r.splice(i,1),r.splice(s,0,a),l(r),d(s)})(e,a),onDragEnd:p,className:`group flex items-center gap-4 bg-surface p-3 pr-4 rounded-2xl border shadow-sm hover:shadow-soft transition-all cursor-move ${0===a?"border-sage/30 shadow-soft scale-[1.01] z-10 relative":"border-transparent"} ${i===a?"opacity-50":""}`,children:[(0,r.jsx)("div",{className:"aspect-square rounded-xl size-16 shrink-0 bg-gray-100 border border-gray-100 overflow-hidden",children:e.image_url?(0,r.jsx)("img",{src:e.image_url,alt:e.name,className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full bg-gray-200"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-0.5",children:[(0,r.jsxs)("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${0===a?"bg-sage/20 text-text-main":"bg-gray-100 text-text-main"}`,children:["#",a+1]}),0===a&&(0,r.jsx)("span",{className:"text-[9px] font-bold text-sage",children:"目玉商品"})]}),(0,r.jsx)("p",{className:"text-text-main text-base font-bold truncate",children:e.name}),(0,r.jsx)("p",{className:"text-text-main text-sm font-semibold",children:e.price_range||"価格未設定"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(n(),{href:`/cms/shops/${s}/items/${e.id}/edit`,onClick:e=>e.stopPropagation(),className:"shrink-0 p-2 text-gray-300 hover:text-sage transition-colors rounded-lg hover:bg-sage/10",title:"編集",children:(0,r.jsx)("span",{className:"material-symbols-outlined text-[20px]",children:"edit"})}),(0,r.jsx)("button",{onClick:s=>{var t;return t=e.id,void(s.preventDefault(),s.stopPropagation(),h(t))},className:"shrink-0 p-2 text-gray-300 hover:text-coral transition-colors rounded-lg hover:bg-coral/10",title:"削除",children:(0,r.jsx)("span",{className:"material-symbols-outlined text-[20px]",children:"delete"})}),(0,r.jsx)("div",{className:`shrink-0 p-2 transition-colors ${0===a?"bg-sage/20 text-text-main rounded-lg":"text-gray-300 group-hover:text-sage"}`,children:(0,r.jsx)("span",{className:"material-symbols-outlined cursor-move",children:"drag_indicator"})})]})]},e.id)),t.length<10&&(0,r.jsxs)(n(),{href:`/cms/shops/${s}/items/new`,className:"flex items-center justify-center gap-3 bg-surface/50 border-2 border-dashed border-border-light p-4 rounded-2xl h-24 group hover:border-sage transition-all",children:[(0,r.jsx)("div",{className:"flex items-center justify-center size-10 rounded-full bg-white text-text-main group-hover:bg-sage group-hover:text-white transition-all transform group-hover:scale-105 shadow-sm",children:(0,r.jsx)("span",{className:"material-symbols-outlined text-2xl",children:"add"})}),(0,r.jsxs)("span",{className:"text-sm font-bold text-text-main group-hover:text-sage transition-colors",children:["枠 #",t.length+1," を埋める"]})]}),(0,r.jsx)("div",{className:"h-8"}),m&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-2xl flex items-center gap-3",children:[(0,r.jsx)("span",{className:"material-symbols-outlined animate-spin text-sage text-2xl",children:"progress_activity"}),(0,r.jsx)("span",{className:"text-text-main font-bold",children:"順番を更新中..."})]})}),u&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-center justify-center p-6",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-2xl max-w-sm w-full",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"p-3 bg-coral/10 rounded-full",children:(0,r.jsx)("span",{className:"material-symbols-outlined text-coral text-2xl",children:"warning"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-text-main",children:"商品を削除"}),(0,r.jsx)("p",{className:"text-sm text-text-main/70",children:"この操作は取り消せません"})]})]}),(0,r.jsx)("p",{className:"text-sm text-text-main mb-6",children:"この商品を削除してもよろしいですか？"}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>{h(null)},disabled:b,className:"flex-1 px-4 py-3 rounded-xl bg-gray-100 text-text-main font-bold hover:bg-gray-200 transition-colors disabled:opacity-50",children:"キャンセル"}),(0,r.jsx)("button",{onClick:g,disabled:b,className:"flex-1 px-4 py-3 rounded-xl bg-coral text-white font-bold hover:bg-coral/90 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:b?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"material-symbols-outlined animate-spin text-[18px]",children:"progress_activity"}),"削除中..."]}):"削除"})]})]})})]})}},3889:(e,s,t)=>{"use strict";t.d(s,{default:()=>o});var r=t(5155),a=t(2115),l=t(3321),n=t(9339);let i=(0,n.createServerReference)("4058414c15e9973b0149b6b9028404986d02245894",n.callServer,void 0,n.findSourceMapURL,"deleteShop");function o({shopId:e}){let[s,t]=(0,a.useState)(null),[n,o]=(0,a.useTransition)(),c=(0,l.useRouter)();return(0,r.jsxs)("div",{className:"mt-8",children:[s&&(0,r.jsx)("div",{className:"bg-coral/10 border border-coral/30 text-coral text-sm font-medium px-4 py-3 rounded-2xl mb-4",children:s}),(0,r.jsx)("button",{onClick:()=>{window.confirm("本当にこのショップを削除しますか？\nこの操作は取り消せません。")&&(t(null),o(async()=>{let s=await i(e);s.error?t(s.error):c.push("/shop")}))},disabled:n,className:"w-full py-4 rounded-2xl bg-coral text-white font-bold text-lg shadow-lg hover:bg-coral/90 active:scale-98 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:n?(0,r.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{className:"material-symbols-outlined animate-spin",children:"progress_activity"}),"削除中..."]}):(0,r.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{className:"material-symbols-outlined",children:"delete"}),"ショップを削除"]})})]})}},6270:(e,s,t)=>{Promise.resolve().then(t.bind(t,3889)),Promise.resolve().then(t.bind(t,3779)),Promise.resolve().then(t.bind(t,3428)),Promise.resolve().then(t.bind(t,1995)),Promise.resolve().then(t.t.bind(t,8500,23))},9339:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={callServer:function(){return l.callServer},createServerReference:function(){return i.createServerReference},findSourceMapURL:function(){return n.findSourceMapURL}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let l=t(7304),n=t(4060),i=t(7197)}},e=>{e.O(0,[500,441,794,358],()=>e(e.s=6270)),_N_E=e.O()}]);