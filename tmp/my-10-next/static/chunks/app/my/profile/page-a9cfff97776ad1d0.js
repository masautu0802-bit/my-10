(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[983],{1244:(e,t,r)=>{Promise.resolve().then(r.bind(r,1995)),Promise.resolve().then(r.bind(r,3758)),Promise.resolve().then(r.bind(r,7867))},1995:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var a=r(5155),s=r(8500),l=r.n(s),n=r(3321);let i=[{href:"/",icon:"home",iconFilled:"home",label:"ホーム"},{href:"/search",icon:"search",label:"さがす"},{href:"/shop",icon:"storefront",label:"ショップ"},{href:"/my/keep",icon:"bookmark",iconFilled:"bookmark",label:"キープ"},{href:"/my",icon:"person",iconFilled:"person",label:"マイページ"}];function o(){let e=(0,n.usePathname)();return(0,a.jsxs)("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-bgwarm border-t border-sage/10 pt-2 px-2 max-w-md mx-auto rounded-t-[2rem] shadow-[0_-5px_20px_rgba(162,178,159,0.08)]",children:[(0,a.jsx)("div",{className:"flex justify-around items-center h-16",children:i.map(t=>{let r="/my"===t.href?"/my"===e||e.startsWith("/my")&&!e.startsWith("/my/keep"):e===t.href||"/"!==t.href&&e.startsWith(t.href);return(0,a.jsxs)(l(),{href:t.href,className:`flex flex-col items-center justify-center gap-1 w-16 transition-colors group ${r?"text-sage":"text-gray-400 hover:text-sage"}`,children:[r&&(0,a.jsx)("span",{className:"absolute -top-0 w-8 h-1 bg-sage rounded-full"}),(0,a.jsx)("span",{className:"material-symbols-outlined text-[24px]",style:r?{fontVariationSettings:"'FILL' 1"}:void 0,children:t.icon}),(0,a.jsx)("span",{className:"text-[10px] font-medium",children:t.label})]},t.label)})}),(0,a.jsx)("div",{className:"h-[env(safe-area-inset-bottom)]"})]})}},3428:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var a=r(5155),s=r(3321);function l({className:e="",iconSize:t=20,icon:r="arrow_back_ios_new",style:l,iconStyle:n}){let i=(0,s.useRouter)();return(0,a.jsx)("button",{onClick:()=>i.back(),className:e||"flex size-10 items-center justify-center rounded-full bg-white shadow-sm hover:scale-105 transition-transform text-text-main border border-sage/50",style:l,"aria-label":"戻る",children:(0,a.jsx)("span",{className:"material-symbols-outlined",style:{fontSize:t,...n},children:r})})}},3758:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var a=r(5155),s=r(2115),l=r(3321),n=r(9339);let i=(0,n.createServerReference)("40210e35917bab0f452552d37436c046d92d011492",n.callServer,void 0,n.findSourceMapURL,"uploadAvatar"),o=(0,n.createServerReference)("4014f758bb23107d414ba494e10e3f78fcd53a57c7",n.callServer,void 0,n.findSourceMapURL,"updateProfile");var c=r(5772);function d({initialName:e,initialAvatarUrl:t,initialBio:r}){let[n,d]=(0,s.useState)(e),[u,x]=(0,s.useState)(r||""),[m,f]=(0,s.useState)(t||null),[h,b]=(0,s.useState)(null),[p,g]=(0,s.useState)(""),[v,j]=(0,s.useTransition)(),[y,w]=(0,s.useState)(!1),N=(0,s.useRef)(null),S=(0,l.useRouter)(),k=async()=>{if(!n.trim())return void g("表示名を入力してください");g("");let e=t;if(h){w(!0);let t=await i(h);if(w(!1),t.error)return void g(t.error);e=t.url}j(async()=>{let t=await o({name:n.trim(),bio:u.trim()||void 0,avatar_url:e});t.error?g(t.error):S.push("/my")})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 items-center mb-6",children:[(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("div",{className:"size-28 rounded-full overflow-hidden bg-gray-200 border-4 border-white shadow-lg",children:m?(0,a.jsx)(c.default,{src:m,alt:"Avatar",width:112,height:112,className:"size-full object-cover"}):(0,a.jsx)("div",{className:"size-full flex items-center justify-center bg-sage/20",children:(0,a.jsx)("span",{className:"material-symbols-outlined text-4xl text-sage",children:"person"})})}),(0,a.jsx)("button",{type:"button",onClick:()=>N.current?.click(),className:"absolute bottom-0 right-0 size-10 rounded-full bg-sage text-white flex items-center justify-center shadow-lg hover:bg-sage/90 transition-all border-2 border-white",children:(0,a.jsx)("span",{className:"material-symbols-outlined text-[20px]",children:"photo_camera"})}),(0,a.jsx)("input",{ref:N,type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(!t)return;if(!t.type.startsWith("image/"))return void g("画像ファイルを選択してください");if(t.size>5242880)return void g("ファイルサイズは5MB以下にしてください");b(t),g("");let r=new FileReader;r.onloadend=()=>{f(r.result)},r.readAsDataURL(t)},className:"hidden"})]}),(0,a.jsx)("p",{className:"text-xs text-text-muted text-center",children:"クリックして画像を変更（最大5MB）"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-[11px] font-bold text-text-muted ml-2 uppercase tracking-wider",children:"表示名"}),(0,a.jsx)("input",{className:"w-full bg-white border-2 border-sage rounded-2xl px-5 py-4 text-base font-semibold focus:outline-none focus:border-text-main focus:ring-0 transition-all placeholder:text-slate-300 text-text-main shadow-sm hover:border-text-main/50",type:"text",value:n,onChange:e=>d(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-[11px] font-bold text-text-muted ml-2 uppercase tracking-wider",children:"自己紹介"}),(0,a.jsx)("textarea",{className:"w-full bg-white border-2 border-sage rounded-2xl px-5 py-4 text-base font-semibold focus:outline-none focus:border-text-main focus:ring-0 transition-all placeholder:text-slate-300 text-text-main shadow-sm hover:border-text-main/50 resize-none",rows:4,value:u,onChange:e=>x(e.target.value),placeholder:"あなたについて教えてください（任意）",maxLength:200}),(0,a.jsxs)("p",{className:"text-xs text-text-muted ml-2",children:[u.length,"/200文字"]})]})]}),p&&(0,a.jsx)("p",{className:"text-coral text-sm font-medium text-center",children:p}),(0,a.jsx)("div",{className:"mt-4 pb-4",children:(0,a.jsx)("button",{onClick:k,disabled:v||y,className:"w-full bg-text-main hover:bg-text-main/90 text-white font-extrabold text-lg py-4 rounded-2xl shadow-lg shadow-text-main/20 transition-all active:scale-[0.98] active:shadow-none flex items-center justify-center gap-2 disabled:opacity-60",children:v||y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"material-symbols-outlined animate-spin text-[20px]",children:"progress_activity"}),(0,a.jsx)("span",{children:y?"アップロード中...":"保存中..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"変更を保存"}),(0,a.jsx)("span",{className:"material-symbols-outlined",children:"auto_awesome"})]})})})]})}},5772:(e,t,r)=>{"use strict";r.d(t,{default:()=>s.a});var a=r(7651),s=r.n(a)},7651:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={default:function(){return d},getImageProps:function(){return c}};for(var s in a)Object.defineProperty(t,s,{enumerable:!0,get:a[s]});let l=r(3623),n=r(5413),i=r(8437),o=l._(r(6095));function c(e){let{props:t}=(0,n.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let d=i.Image},7867:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var a=r(5155),s=r(3321),l=r(3428);function n(){let e=(0,s.useRouter)();return(0,a.jsxs)("header",{className:"flex items-center justify-between px-6 py-5 bg-bgwarm sticky top-0 z-20",children:[(0,a.jsx)(l.default,{}),(0,a.jsx)("h1",{className:"text-xl font-extrabold leading-tight tracking-tight text-text-main",children:"プロフィール編集"}),(0,a.jsx)("button",{onClick:()=>e.back(),className:"text-text-muted font-bold text-sm px-2 hover:text-text-main transition-colors",children:"キャンセル"})]})}},9339:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={callServer:function(){return l.callServer},createServerReference:function(){return i.createServerReference},findSourceMapURL:function(){return n.findSourceMapURL}};for(var s in a)Object.defineProperty(t,s,{enumerable:!0,get:a[s]});let l=r(7304),n=r(4060),i=r(7197)}},e=>{e.O(0,[500,645,441,794,358],()=>e(e.s=1244)),_N_E=e.O()}]);